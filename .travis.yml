sudo: required
language: javascript
env:
  global:
  - secure: Zx94x/kic5rJqEpysZ5GXx64Cqo8mUyJCLf/r9VktfXtuhHKYOB0iqAdcmMkETHdnVwCY3It2zYq4F9XZPu59lyRw3kLDsTO7JxHyXiNCEk/K3eJ0BZjjAa+JMAtZnCczVsJduXUDtj+M73CPPxN0J2/zRIBoE+QzysZdxD7LvOvMg2mYFJfzb9SNnpfUvVVr1ieILgi5k2uZFDjS6HKZ06gLo52vEHWrGE8lmJA+zhTFhUXziBKiFupzHmqvFndW2LikW2yumCj0tjaiP0xpAK9Molp6S+qc98ArZRauidNsRGWjQpY3jPMUuVTMWp84g/QN6V8WMdcabSbLvbVvi9x6kr+0Ru42rV90gGYjmoMPcWMwb24pmb9Ez2fffAKDaty0w810rg7/RjZEmhhxl2uL9zRCQ7SsY1GL3OsfkjPhEVIdkvjOWZpSqmqjXxMh0XFJsU3JkAWJml/PwmSQ7scmDwia1Fmo51E5xoWCSPZUnbn/e/E7EVcBWfzR8RJtv98vXyHBEL7u9MmmsFPjHJrt3+fbIQtz97MWzxKu2OZ6MZnAycv6cZw3qIbqRrOLnDSHkCMGUgg978tXtNKcs4sV1Ko/byeYxhHD+29dIEzkiA4Cp5JSYxczmGKCTFbvRmk3+i4aCCU3ZWbOc9I52rCra3hVmQNm8/jdYzhqFE=
  - secure: dQAjUwanwekPSI1EPDdIO2NjFyKIna927LqnJ/bnIQxNkBJwTELpcnxqUTiqFKnqHdtEnl1Nc//QHGatVatODtSmcR3oKPiRm/wcOKnIjMrRzeNOwtTIqMZYmjTpCwesqQ/uDjr6JjltNEQ3fUm9g13aMas7UikvHsJHuWLHUf7Z/JgqP+/EjW1xAZwrBCcWVMOZBKTxveQ7pgX4bA0NIlJpETvpIPiBlxA3Roo2++vU1cqNKkw8a6Cxm3/pXvRtu/65I1ZCT+a5bVhaIEz0zcUmeelRf2cBmDADbicT5cBD6XGgdh8ELxGwn9lhv/uukurfcEtITIKfsb1pRoHcPs7437zwC8UeMIqWvXoxIsJJdLi6j2flVG0QsEW4bdiqET3vqVdxKz50b/i5T472ldUOClYNpdZeATQ88empRdMrsDQq1jv8vvViqMxMsjAG4VTpxQjCINpPqPdyc8f4omA/3bqAaKUOCdTFAgy2hczcLcv1ev/Cq9UpCf8o+egnBIIs/U8hzkO8GeQY5FRn+lbXfNCh88Lc9iH+/+U3qIgR1fp10PB/cCyRnZbI9tIC3YPu1QFqSXzcqkCt8qHgLvj694US3C//Q56kRqEIQI1P+uxhEerJUvlUpsiyEenrPh/SYkhpfz1m5v1x2N7HlQU/DzItkMV2ChwDii1eehQ=
  - secure: Grlt6al6nfRoDB1+x5sKzmEHI+JupsZuU3u/V+zx04XdSbAkOFMBNcJeboG9weR9HfFBqTMCnpFci9CVhtwFVzQuUnMQ/8DlDr2li8MtvQe748gWAKZ65XbNtGfX1s+goUNbxwnV5S1CKu0qK2DxBNaplZe2zAv6SNOX0HB6+C5ljAtxbYKJTU0AKvs2RueqC+uj8gC/yqbQJFNOKMdoxfnABLchoY5h2VL7RFvqyWJMl2iyhLq5RI4pNC/yvD3yb82RveUKvsLsAQu6UpxUOMmgavn9TcnMsGljvop/Jyfz6H3K+m4rdYsd1kdKkEfzSLSEIPgoenknKaUG/KQzFmm/QQdUUHO35NJupeTDNmrVaQ8LGPVLlOQYxxnu67FbnSHmOIXEB4Vqssw1SGtfQ0e3B7UfBM0M7dykHWyw6RVkt2nVlZa+p5wySwbe0EpBgxJI80mz/aHgiNn338Qw+0ZHj/evKwTirZ+xsROR79nWamRhLJaqxfIOCz1sNISeYwJB4k+q3CaDTSiEFlt8Xe/U4oHPYxbBKuK3nJ3MQ2wslRXFkAKwXANRsMcw7NzP9/I43sgc8y7GtCW1PNQWv8RnuHuytKRlTBtkR3ujruawQmblrjzG4McSVB0M6dgUXIbJnjE5RDuP5ApypltL8KYFQ1nCX7zBJRjh1vv9HVw=
services:
- docker
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=banomaster/rso-backend-movies-search
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
